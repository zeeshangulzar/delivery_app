<script src="//maps.google.com/maps/api/js?key=AIzaSyBRXZRZ2D2sB0lqQhBDsm619tV471Y5zFw"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script>

<div class="right_col" role="main">
  <div class="">
    <div class="page-title">
      <div class="title_left">
        <h3>Map</h3>
      </div>
      <div style='width: 1050px;'>
        <div id="map" style='width: 1050px; height: 500px;'></div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
   handler = Gmaps.build('Google');
   handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
      var Qatar = [
         {"lat":25.426063,"lng":51.181199}
      ];
      var prev_lat, prev_lon;
      _.each(Qatar, function(json, index){
         google.maps.event.addListener(handler.map.getServiceObject(), 'click', function(event){
            console.log("Lat: "+event.latLng.lat()+" "+", Lon: "+event.latLng.lng());
            console.log("PrevLat: "+prev_lat+" "+", PrevLon: "+prev_lon);
            var new_point = [ { "lat":event.latLng.lat(), "lng":event.latLng.lng() } ];
            handler.bounds.extendWith(handler.addPolygons(
            [
               [
                  {lat:  prev_lat, lng: prev_lon},
                  {lat:  event.latLng.lat(), lng: event.latLng.lng()}
               ]
            ],{ strokeColor: '#F90505'}
           ));
           prev_lat = event.latLng.lat();
           prev_lon = event.latLng.lng();
         });
         handler.map.centerOn(Qatar);
         handler.fitMapToBounds();
         handler.getMap().setZoom(9);
      });
   });
</script>
